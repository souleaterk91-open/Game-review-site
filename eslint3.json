[{"filePath":"D:\\review project\\eslint.config.mjs","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\review project\\next.config.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\review project\\scripts\\make-admin.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\review project\\src\\app\\admin\\add-game\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\review project\\src\\app\\admin\\edit-game\\[gameId]\\EditGameForm.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\review project\\src\\app\\admin\\edit-game\\[gameId]\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\review project\\src\\app\\admin\\edit-review\\[gameId]\\EditReviewForm.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\review project\\src\\app\\admin\\edit-review\\[gameId]\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\review project\\src\\app\\admin\\layout.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\review project\\src\\app\\admin\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\review project\\src\\app\\admin\\write-review\\[gameId]\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\review project\\src\\app\\api\\auth\\[...nextauth]\\route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\review project\\src\\app\\games\\[slug]\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\review project\\src\\app\\layout.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\review project\\src\\app\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\review project\\src\\app\\theme-preview\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\review project\\src\\auth.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\review project\\src\\components\\HomeContent.tsx","messages":[{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\nD:\\review project\\src\\components\\HomeContent.tsx:31:9\n  29 |\n  30 |     useEffect(() => {\n> 31 |         setIsMounted(true);\n     |         ^^^^^^^^^^^^ Avoid calling setState() directly within an effect\n  32 |     }, []);\n  33 |\n  34 |     // Daily Pick & Countdown Logic","line":31,"column":9,"nodeType":null,"endLine":31,"endColumn":21}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport { useState, useEffect, useMemo } from \"react\";\r\nimport { useRouter } from \"next/navigation\";\r\nimport Image from \"next/image\";\r\n\r\n// Defining the shape of the data received from Prisma\r\ntype GameData = {\r\n    id: string;\r\n    slug: string;\r\n    title: string;\r\n    releaseDate: Date;\r\n    company: string;\r\n    genre: string;\r\n    coverImage: string;\r\n    storyline: string;\r\n    postReview: { totalScore: number } | null;\r\n};\r\n\r\nexport default function HomeContent({ initialGames }: { initialGames: GameData[] }) {\r\n    const router = useRouter();\r\n    const [searchQuery, setSearchQuery] = useState(\"\");\r\n    const [selectedGame, setSelectedGame] = useState<string | null>(null);\r\n    const [dailyPick, setDailyPick] = useState<GameData | null>(null);\r\n    const [timeRemaining, setTimeRemaining] = useState<string>(\"\");\r\n    const [isMounted, setIsMounted] = useState(false);\r\n\r\n    const allGames = useMemo(() => initialGames, [initialGames]);\r\n\r\n    useEffect(() => {\r\n        setIsMounted(true);\r\n    }, []);\r\n\r\n    // Daily Pick & Countdown Logic\r\n    useEffect(() => {\r\n        if (allGames.length === 0) return;\r\n\r\n        const calculateDailyPick = () => {\r\n            const now = new Date();\r\n            const dateString = now.toDateString();\r\n\r\n            let hash = 0;\r\n            for (let i = 0; i < dateString.length; i++) {\r\n                hash = (hash << 5) - hash + dateString.charCodeAt(i);\r\n                hash |= 0;\r\n            }\r\n\r\n            const index = Math.abs(hash) % allGames.length;\r\n            setDailyPick(allGames[index]);\r\n\r\n            const tomorrow = new Date(now);\r\n            tomorrow.setHours(24, 0, 0, 0);\r\n            const diff = tomorrow.getTime() - now.getTime();\r\n\r\n            const hours = Math.floor((diff / (1000 * 60 * 60)) % 24);\r\n            const minutes = Math.floor((diff / 1000 / 60) % 60);\r\n            const seconds = Math.floor((diff / 1000) % 60);\r\n\r\n            setTimeRemaining(\r\n                `${hours.toString().padStart(2, '0')}h ${minutes.toString().padStart(2, '0')}m ${seconds.toString().padStart(2, '0')}s`\r\n            );\r\n        };\r\n\r\n        calculateDailyPick();\r\n        const interval = setInterval(calculateDailyPick, 1000);\r\n\r\n        return () => clearInterval(interval);\r\n    }, [allGames]);\r\n\r\n    const handleSearch = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n        setSearchQuery(e.target.value);\r\n    };\r\n\r\n    const filteredGames = searchQuery\r\n        ? allGames.filter((game) => game.title.toLowerCase().includes(searchQuery.toLowerCase()))\r\n        : [];\r\n\r\n    // For real database we'll just sort by releaseDate or if we had an updatedAt field.\r\n    // Prisma games use releaseDate for sorting for now since views are gone.\r\n    const latestGames = [...allGames].sort((a, b) => new Date(b.releaseDate).getTime() - new Date(a.releaseDate).getTime());\r\n    const topViewedGames = [...allGames]; // In a real app, sort by actual views\r\n\r\n    const handleGameSelect = (slug: string) => {\r\n        setSelectedGame(slug);\r\n    };\r\n\r\n    const navigateToReview = (segment: \"pre\" | \"post\") => {\r\n        if (selectedGame) {\r\n            router.push(`/games/${selectedGame}?mode=${segment}`);\r\n        }\r\n    };\r\n\r\n    const renderGameCard = (game: GameData, showViews: boolean = false) => (\r\n        <div\r\n            key={game.id}\r\n            className=\"glass-panel game-card\"\r\n            onClick={() => handleGameSelect(game.slug)}\r\n            style={{ cursor: 'pointer', padding: '0', overflow: 'hidden', transition: 'transform 0.3s, box-shadow 0.3s', display: 'flex', flexDirection: 'column' }}\r\n            onMouseEnter={(e) => {\r\n                e.currentTarget.style.transform = 'translateY(-5px)';\r\n                e.currentTarget.style.boxShadow = '0 12px 40px rgba(157, 78, 221, 0.2)';\r\n            }}\r\n            onMouseLeave={(e) => {\r\n                e.currentTarget.style.transform = 'translateY(0)';\r\n                e.currentTarget.style.boxShadow = '0 8px 32px 0 rgba(0, 0, 0, 0.3)';\r\n            }}\r\n        >\r\n            <div style={{ position: 'relative', height: '180px' }}>\r\n                <Image\r\n                    src={game.coverImage}\r\n                    alt={game.title}\r\n                    fill\r\n                    unoptimized\r\n                    sizes=\"(max-width: 768px) 100vw, (max-width: 1200px) 50vw, 33vw\"\r\n                    style={{ objectFit: 'cover' }}\r\n                />\r\n                <div style={{ position: 'absolute', top: '12px', right: '12px', display: 'flex', gap: '8px' }}>\r\n                    <span className=\"badge\" style={{ background: 'rgba(0,0,0,0.8)', border: 'none' }}>\r\n                        ★ {game.postReview?.totalScore || 'N/A'}\r\n                    </span>\r\n                </div>\r\n            </div>\r\n            <div style={{ padding: '20px', flexGrow: 1, display: 'flex', flexDirection: 'column' }}>\r\n                <h3 style={{ marginBottom: '8px', fontSize: '1.2rem' }}>{game.title}</h3>\r\n                <p style={{ color: 'var(--primary)', fontSize: '0.8rem', fontWeight: 600, marginBottom: '12px', textTransform: 'uppercase', letterSpacing: '1px' }}>\r\n                    {game.genre}\r\n                </p>\r\n                <div style={{ marginTop: 'auto', paddingTop: '10px', display: 'flex', justifyContent: 'space-between', alignItems: 'center' }}>\r\n                    <span style={{ color: 'var(--text-muted)', fontSize: '0.8rem' }}>\r\n                        {showViews ? \"Popular\" : new Date(game.releaseDate).toLocaleDateString()}\r\n                    </span>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n\r\n    return (\r\n        <div className=\"container\" style={{ paddingTop: '60px', paddingBottom: '80px', minHeight: '80vh' }}>\r\n            <section className=\"search-section\" style={{ maxWidth: '700px', margin: '0 auto 60px auto', textAlign: 'center' }}>\r\n                <h1 style={{ fontSize: '2.5rem', marginBottom: '16px' }}>Search the Vault, <span className=\"text-gradient\">Find Your Game</span></h1>\r\n                <p style={{ color: 'var(--text-muted)', marginBottom: '30px' }}>Unlock spoiler-free impressions or deep-dive into the vault&apos;s analysis.</p>\r\n                <input\r\n                    type=\"text\"\r\n                    className=\"glass-panel\"\r\n                    placeholder=\"Search for a game... (e.g., Elden Ring)\"\r\n                    value={searchQuery}\r\n                    onChange={handleSearch}\r\n                    style={{ width: '100%', padding: '18px 24px', fontSize: '1.2rem', color: '#fff', border: '1px solid var(--primary)', outline: 'none', borderRadius: '50px', background: 'var(--bg-surface-elevated)' }}\r\n                />\r\n            </section>\r\n\r\n            {searchQuery ? (\r\n                <section className=\"search-results fade-in\">\r\n                    <h2 style={{ marginBottom: '24px', borderBottom: '1px solid var(--border-subtle)', paddingBottom: '10px' }}>Search Results</h2>\r\n                    <div style={{ display: 'grid', gridTemplateColumns: 'repeat(auto-fill, minmax(280px, 1fr))', gap: '24px' }}>\r\n                        {filteredGames.length > 0 ? (\r\n                            filteredGames.map(game => renderGameCard(game))\r\n                        ) : (\r\n                            <p style={{ color: 'var(--text-muted)' }}>No games found matching &quot;{searchQuery}&quot;.</p>\r\n                        )}\r\n                    </div>\r\n                </section>\r\n            ) : (\r\n                <div className=\"fade-in\" style={{ display: 'flex', flexDirection: 'column', gap: '60px' }}>\r\n                    {isMounted && dailyPick && (\r\n                        <section className=\"fade-in\">\r\n                            <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'flex-end', marginBottom: '20px', borderBottom: '1px solid var(--border-subtle)', paddingBottom: '10px' }}>\r\n                                <h2 style={{ display: 'flex', alignItems: 'center', gap: '8px', margin: 0 }}>\r\n                                    <span style={{ color: 'var(--primary)', textShadow: '0 0 10px var(--primary-glow)' }}>✦</span> Today&apos;s Vault Pick\r\n                                </h2>\r\n                                <span className=\"badge\" style={{ background: 'var(--bg-surface-elevated)', border: '1px solid var(--border-subtle)', color: 'var(--text-muted)', fontSize: '0.8rem' }}>\r\n                                    New pick in {timeRemaining}\r\n                                </span>\r\n                            </div>\r\n\r\n                            <div\r\n                                className=\"glass-panel vault-card\"\r\n                                onClick={() => handleGameSelect(dailyPick.slug)}\r\n                                style={{\r\n                                    cursor: 'pointer',\r\n                                    padding: '0',\r\n                                    overflow: 'hidden',\r\n                                    display: 'flex',\r\n                                    flexDirection: 'row',\r\n                                    alignItems: 'center',\r\n                                    background: 'linear-gradient(145deg, rgba(30, 41, 59, 0.9) 0%, rgba(15, 23, 42, 0.95) 100%)',\r\n                                    border: '1px solid rgba(56, 189, 248, 0.4)',\r\n                                    boxShadow: '0 0 30px rgba(56, 189, 248, 0.15), inset 0 0 20px rgba(0,0,0,0.5)',\r\n                                    minHeight: '200px'\r\n                                }}\r\n                            >\r\n                                <div style={{ width: '35%', height: '100%', minHeight: '200px', position: 'relative' }}>\r\n                                    <Image\r\n                                        src={dailyPick.coverImage}\r\n                                        alt={dailyPick.title}\r\n                                        fill\r\n                                        priority\r\n                                        unoptimized\r\n                                        sizes=\"35vw\"\r\n                                        style={{ objectFit: 'cover' }}\r\n                                    />\r\n                                    <div style={{ position: 'absolute', inset: 0, background: 'linear-gradient(to right, transparent, rgba(15, 23, 42, 0.95))' }} />\r\n                                </div>\r\n\r\n                                <div style={{ padding: '30px', flex: 1 }}>\r\n                                    <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'flex-start', marginBottom: '10px' }}>\r\n                                        <div>\r\n                                            <span style={{ color: 'var(--primary)', fontSize: '0.8rem', fontWeight: 600, textTransform: 'uppercase', letterSpacing: '1px', display: 'block', marginBottom: '4px' }}>\r\n                                                {dailyPick.genre}\r\n                                            </span>\r\n                                            <h3 style={{ fontSize: '1.8rem', margin: 0, textShadow: '0 2px 4px rgba(0,0,0,0.5)' }}>{dailyPick.title}</h3>\r\n                                        </div>\r\n                                        <div className=\"badge\" style={{ background: 'linear-gradient(135deg, var(--primary), var(--secondary))', color: '#fff', border: 'none', fontSize: '1.1rem', padding: '6px 14px' }}>\r\n                                            ★ {dailyPick.postReview?.totalScore || 'N/A'}\r\n                                        </div>\r\n                                    </div>\r\n                                    <p style={{ color: 'var(--text-muted)', fontSize: '1rem', lineHeight: 1.6, maxWidth: '90%' }}>\r\n                                        {dailyPick.storyline}\r\n                                    </p>\r\n                                </div>\r\n                            </div>\r\n                        </section>\r\n                    )}\r\n\r\n                    <section>\r\n                        <h2 style={{ marginBottom: '24px', borderBottom: '1px solid var(--border-subtle)', paddingBottom: '10px', display: 'flex', alignItems: 'center', gap: '8px' }}>\r\n                            <span style={{ color: 'var(--primary)' }}>•</span> Latest Updated Reviews\r\n                        </h2>\r\n                        <div style={{ display: 'grid', gridTemplateColumns: 'repeat(auto-fill, minmax(280px, 1fr))', gap: '24px' }}>\r\n                            {latestGames.map(game => renderGameCard(game, false))}\r\n                        </div>\r\n                    </section>\r\n\r\n                    <section>\r\n                        <h2 style={{ marginBottom: '24px', borderBottom: '1px solid var(--border-subtle)', paddingBottom: '10px', display: 'flex', alignItems: 'center', gap: '8px' }}>\r\n                            <span style={{ color: 'var(--secondary)' }}>★</span> Top Rated Reviews\r\n                        </h2>\r\n                        <div style={{ display: 'grid', gridTemplateColumns: 'repeat(auto-fill, minmax(280px, 1fr))', gap: '24px' }}>\r\n                            {topViewedGames.map(game => renderGameCard(game, true))}\r\n                        </div>\r\n                    </section>\r\n                </div>\r\n            )}\r\n\r\n            {selectedGame && (\r\n                <div className=\"modal-overlay\" style={{ position: 'fixed', top: 0, left: 0, width: '100%', height: '100%', backgroundColor: 'rgba(10, 5, 20, 0.85)', backdropFilter: 'blur(12px)', display: 'flex', justifyContent: 'center', alignItems: 'center', zIndex: 1000 }}>\r\n                    <div className=\"glass-panel modal-content vault-modal fade-in\" style={{ padding: '40px', maxWidth: '500px', width: '90%', textAlign: 'center', position: 'relative' }}>\r\n                        <div className=\"scan-line\" />\r\n                        <button\r\n                            onClick={() => setSelectedGame(null)}\r\n                            style={{ position: 'absolute', top: '16px', right: '20px', background: 'transparent', border: 'none', color: 'var(--text-muted)', fontSize: '2rem', cursor: 'pointer', zIndex: 10 }}\r\n                        >\r\n                            &times;\r\n                        </button>\r\n                        <h2 style={{ marginBottom: '10px', letterSpacing: '2px', textTransform: 'uppercase' }}>Access the Vault</h2>\r\n                        <p style={{ color: 'var(--primary)', marginBottom: '30px', fontSize: '0.9rem', fontWeight: 600, textTransform: 'uppercase', letterSpacing: '1px' }}>\r\n                            Select your clearance level to proceed.\r\n                        </p>\r\n\r\n                        <div style={{ display: 'flex', flexDirection: 'column', gap: '16px', position: 'relative', zIndex: 5 }}>\r\n                            <button className=\"btn-primary\" onClick={() => navigateToReview(\"pre\")} style={{ padding: '20px', fontSize: '1.2rem', display: 'flex', flexDirection: 'column', alignItems: 'center', gap: '4px' }}>\r\n                                <span style={{ fontWeight: 800 }}>[ PRE-GAME REVIEW ]</span>\r\n                                <span style={{ fontSize: '0.8rem', fontWeight: 'normal', opacity: 0.8 }}>SPOILER-FREE IMPRESSIONS</span>\r\n                            </button>\r\n                            <button className=\"btn-outline\" onClick={() => navigateToReview(\"post\")} style={{ padding: '20px', fontSize: '1.2rem', display: 'flex', flexDirection: 'column', alignItems: 'center', gap: '4px', borderColor: 'var(--secondary)' }}>\r\n                                <span style={{ color: 'var(--secondary)', fontWeight: 800 }}>[ POST-GAME ANALYSIS ]</span>\r\n                                <span style={{ fontSize: '0.8rem', fontWeight: 'normal', opacity: 0.8, color: 'var(--text-muted)' }}>DEEP DIVE & TOTAL RATINGS</span>\r\n                            </button>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\review project\\src\\lib\\actions.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]}]
